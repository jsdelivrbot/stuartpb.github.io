<!DOCTYPE html>
<head>
<meta charset="utf-8">
<title>The very last can of hue hash!</title>
<style>
body {
  background-color: white;
  font-family: sans-serif;
  text-align: center;
}

input {
  font-size: 20pt;
  width: 80%;
}

button {
  font-size: 20pt;
}
</style>
<script>
function hueHash(self){
  var str = self.value;
  var hh = 0;
  for (var i = 0, len = str.length; i < len; i++) {
    hh += 7 * hh + 1.25 * str.charCodeAt(i);
  }

  hh = hh % 360
  self.style.backgroundColor = "hsl("+ hh +", 60%, 90%)"
}
function newBar(){
  var newp = document.createElement('p');
  newp.innerHTML = '<input style="background-color: hsl(0,60%,90%)" onkeyup="hueHash(this);" onkeypress="if (event.keyCode==13) newBar()" autofocus><button onclick="newBar()">+</button>';
  document.body.appendChild(newp);
}
</script>
</head>
<body onload="newBar()">
</body>
</html>
